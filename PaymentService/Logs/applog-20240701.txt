{"@t":"2024-07-01T18:32:26.9228910Z","@mt":"Starting InvoiceProcessorHostedService","SourceContext":"PaymentService.Infrastructure.Messaging.InvoiceProcessorHostedService"}
{"@t":"2024-07-01T19:15:37.9880347Z","@mt":"Starting InvoiceProcessorHostedService","SourceContext":"PaymentService.Infrastructure.Messaging.InvoiceProcessorHostedService"}
{"@t":"2024-07-01T20:24:13.3357174Z","@mt":"Invoice Processor Service is starting.","SourceContext":"PaymentService.Infrastructure.Messaging.InvoiceProcessorService"}
{"@t":"2024-07-01T20:35:29.3425334Z","@mt":"Invoice saved. Details: Id: 7bdc2ea3-1b11-4c26-acfc-48957efb7e98, AuctionId: 8, BidderId: a69deeb2-6a16-4383-be00-19af6f948244, BidItemName: pen, WinningBidAmount: 15.00, CreatedAt: 01/01/0001 00:00:00","SourceContext":"PaymentService.Services.InvoiceProcessor"}
{"@t":"2024-07-01T20:37:37.9427314Z","@mt":"An error occurred while initiating payment","@l":"Error","@x":"System.Exception: Only the bid winner is permitted to carry out this operation\r\n   at PaymentService.Services.PaymentService.InitiatePaymentAsync(String userId, PaymentRequest paymentRequest) in C:\\Users\\REAGAN\\Documents\\Dev\\C#\\AuctionBiddingApp\\PaymentService\\Services\\PaymentService.cs:line 55\r\n   at PaymentService.Controllers.PaymentController.InitiatePayment(PaymentRequest request) in C:\\Users\\REAGAN\\Documents\\Dev\\C#\\AuctionBiddingApp\\PaymentService\\Controllers\\PaymentController.cs:line 34","@tr":"10ce504923d23350a130ac5a1411f3b7","@sp":"75c9bec6774196a8","SourceContext":"PaymentService.Controllers.PaymentController","ActionId":"c9b9d783-afcd-43f6-abad-43ed3fc7b26f","ActionName":"PaymentService.Controllers.PaymentController.InitiatePayment (PaymentService)","RequestId":"0HN4Q1F3P5BOE:00000001","RequestPath":"/api/payment/initiate","ConnectionId":"0HN4Q1F3P5BOE"}
{"@t":"2024-07-01T20:37:38.0296514Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["1642.1655"],"@l":"Error","@tr":"10ce504923d23350a130ac5a1411f3b7","@sp":"75c9bec6774196a8","RequestMethod":"POST","RequestPath":"/api/payment/initiate","StatusCode":500,"Elapsed":1642.1655,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HN4Q1F3P5BOE:00000001","ConnectionId":"0HN4Q1F3P5BOE"}
{"@t":"2024-07-01T20:45:28.0860196Z","@mt":"Sending request to Paystack: {\"Reference\":\"20240701204526048-f4ba8218750343cfa4f2dbe35a67842b\",\"amount\":1500,\"Email\":\"kelly@gmail.com\",\"Plan\":null,\"callback_url\":\"https://d3d6-102-89-43-15.ngrok-free.app/api/payment/callback\",\"subaccount\":null,\"transaction_charge\":0,\"currency\":\"NGN\",\"Bearer\":null,\"invoice_limit\":null,\"Channels\":null,\"split_code\":null,\"Metadata\":\"{\\\"cancel_action\\\":\\\"\\\",\\\"invoice_id\\\":8,\\\"custom_fields\\\":[]}\"}","@tr":"e51c1091cecb19bcb009a4596ecdf541","@sp":"2828e9793891b6d7","SourceContext":"PaymentService.Services.PaymentService","ActionId":"c9b9d783-afcd-43f6-abad-43ed3fc7b26f","ActionName":"PaymentService.Controllers.PaymentController.InitiatePayment (PaymentService)","RequestId":"0HN4Q1F3P5BOF:00000001","RequestPath":"/api/payment/initiate","ConnectionId":"0HN4Q1F3P5BOF"}
{"@t":"2024-07-01T20:45:28.3814333Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["3218.4599"],"@tr":"e51c1091cecb19bcb009a4596ecdf541","@sp":"2828e9793891b6d7","RequestMethod":"POST","RequestPath":"/api/payment/initiate","StatusCode":200,"Elapsed":3218.4599,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HN4Q1F3P5BOF:00000001","ConnectionId":"0HN4Q1F3P5BOF"}
{"@t":"2024-07-01T20:50:43.6714868Z","@mt":"Invoice Processor Service is starting.","SourceContext":"PaymentService.Infrastructure.Messaging.InvoiceProcessorService"}
{"@t":"2024-07-01T20:51:29.5019632Z","@mt":"Computed Signature: 2cd083138073d53391d8af15bdb4a4f3239d845e42ca45aea9c7ce7966c1ce02dd0e88f36f8b2711edee5a2857442a65fbd383989cb466ff6d916806046cbb1f","@tr":"34feef46d74194d86ee11811cd8e0506","@sp":"4101696e46f6c1d1","SourceContext":"PaymentService.Services.PaymentService","ActionId":"54b48e5b-da50-4cf1-9ff4-51a0951bd00b","ActionName":"PaymentService.Controllers.PaymentWebhookController.HandleWebhook (PaymentService)","RequestId":"0HN4Q1TUBUDIB:00000001","RequestPath":"/api/webhook/process","ConnectionId":"0HN4Q1TUBUDIB"}
{"@t":"2024-07-01T20:51:29.5235099Z","@mt":"Actual Signature: 2cd083138073d53391d8af15bdb4a4f3239d845e42ca45aea9c7ce7966c1ce02dd0e88f36f8b2711edee5a2857442a65fbd383989cb466ff6d916806046cbb1f","@tr":"34feef46d74194d86ee11811cd8e0506","@sp":"4101696e46f6c1d1","SourceContext":"PaymentService.Services.PaymentService","ActionId":"54b48e5b-da50-4cf1-9ff4-51a0951bd00b","ActionName":"PaymentService.Controllers.PaymentWebhookController.HandleWebhook (PaymentService)","RequestId":"0HN4Q1TUBUDIB:00000001","RequestPath":"/api/webhook/process","ConnectionId":"0HN4Q1TUBUDIB"}
{"@t":"2024-07-01T20:51:29.5237909Z","@mt":"Signature verified successfully","@tr":"34feef46d74194d86ee11811cd8e0506","@sp":"4101696e46f6c1d1","SourceContext":"PaymentService.Services.PaymentService","ActionId":"54b48e5b-da50-4cf1-9ff4-51a0951bd00b","ActionName":"PaymentService.Controllers.PaymentWebhookController.HandleWebhook (PaymentService)","RequestId":"0HN4Q1TUBUDIB:00000001","RequestPath":"/api/webhook/process","ConnectionId":"0HN4Q1TUBUDIB"}
{"@t":"2024-07-01T20:51:29.7206706Z","@mt":"Request body deserialized","@tr":"34feef46d74194d86ee11811cd8e0506","@sp":"4101696e46f6c1d1","SourceContext":"PaymentService.Controllers.PaymentWebhookController","ActionId":"54b48e5b-da50-4cf1-9ff4-51a0951bd00b","ActionName":"PaymentService.Controllers.PaymentWebhookController.HandleWebhook (PaymentService)","RequestId":"0HN4Q1TUBUDIB:00000001","RequestPath":"/api/webhook/process","ConnectionId":"0HN4Q1TUBUDIB"}
{"@t":"2024-07-01T20:51:29.7230494Z","@mt":"Transaction Details: Reference={Reference}, Amount={Amount}, InvoiceId={InvoiceId}","@tr":"34feef46d74194d86ee11811cd8e0506","@sp":"4101696e46f6c1d1","Reference":"20240701204526048-f4ba8218750343cfa4f2dbe35a67842b","Amount":1500,"InvoiceId":8,"SourceContext":"PaymentService.Services.PaymentService","ActionId":"54b48e5b-da50-4cf1-9ff4-51a0951bd00b","ActionName":"PaymentService.Controllers.PaymentWebhookController.HandleWebhook (PaymentService)","RequestId":"0HN4Q1TUBUDIB:00000001","RequestPath":"/api/webhook/process","ConnectionId":"0HN4Q1TUBUDIB"}
{"@t":"2024-07-01T20:51:56.9358909Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["52.4999"],"@tr":"6493f3533b6a2268779bf62ab39c727e","@sp":"d41755709a668728","RequestMethod":"GET","RequestPath":"/api/webhook/process","StatusCode":405,"Elapsed":52.4999,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HN4Q1TUBUDIC:00000001","ConnectionId":"0HN4Q1TUBUDIC"}
{"@t":"2024-07-01T20:52:05.3814803Z","@mt":"Invoice PDF created","@tr":"34feef46d74194d86ee11811cd8e0506","@sp":"4101696e46f6c1d1","SourceContext":"PaymentService.Services.PaymentService","ActionId":"54b48e5b-da50-4cf1-9ff4-51a0951bd00b","ActionName":"PaymentService.Controllers.PaymentWebhookController.HandleWebhook (PaymentService)","RequestId":"0HN4Q1TUBUDIB:00000001","RequestPath":"/api/webhook/process","ConnectionId":"0HN4Q1TUBUDIB"}
{"@t":"2024-07-01T20:52:08.3939028Z","@mt":"Invoice email sent for invoice {InvoiceId}","@tr":"34feef46d74194d86ee11811cd8e0506","@sp":"4101696e46f6c1d1","InvoiceId":8,"SourceContext":"PaymentService.Services.PaymentService","ActionId":"54b48e5b-da50-4cf1-9ff4-51a0951bd00b","ActionName":"PaymentService.Controllers.PaymentWebhookController.HandleWebhook (PaymentService)","RequestId":"0HN4Q1TUBUDIB:00000001","RequestPath":"/api/webhook/process","ConnectionId":"0HN4Q1TUBUDIB"}
{"@t":"2024-07-01T20:52:08.3948456Z","@mt":"Payment completed","@tr":"34feef46d74194d86ee11811cd8e0506","@sp":"4101696e46f6c1d1","SourceContext":"PaymentService.Services.PaymentService","ActionId":"54b48e5b-da50-4cf1-9ff4-51a0951bd00b","ActionName":"PaymentService.Controllers.PaymentWebhookController.HandleWebhook (PaymentService)","RequestId":"0HN4Q1TUBUDIB:00000001","RequestPath":"/api/webhook/process","ConnectionId":"0HN4Q1TUBUDIB"}
{"@t":"2024-07-01T20:52:08.4166880Z","@mt":"HTTP {RequestMethod} {RequestPath} responded {StatusCode} in {Elapsed:0.0000} ms","@r":["39608.9832"],"@tr":"34feef46d74194d86ee11811cd8e0506","@sp":"4101696e46f6c1d1","RequestMethod":"POST","RequestPath":"/api/webhook/process","StatusCode":200,"Elapsed":39608.9832,"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HN4Q1TUBUDIB:00000001","ConnectionId":"0HN4Q1TUBUDIB"}
